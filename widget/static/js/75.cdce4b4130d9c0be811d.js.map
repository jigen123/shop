{"version":3,"sources":["webpack:///./src/pages/home/kbb/payweb.vue?94ad","webpack:///./src/pages/home/kbb/payweb.vue?07c1","webpack:///./src/pages/home/kbb/payweb.vue"],"names":["module","exports","render","_h","this","$createElement","_c","_self","attrs","id","staticClass","title","left-options","backText","staticRenderFns","Component","__webpack_require__","ssrContext","__webpack_exports__","name","data","view","url","target","imgUrl","$route","query","link","pay_timer","error","myaudio","mounted","_this2","_this","window","plus","mui","plusReady","audio","createPlayer","_query","key","payload","substring","length","console","log","webview","create","top","bottom","show","onerror","_url","addEventListener","e","progress","decodeURIComponent","getWebviewById","getURL","check_url","reg","RegExp","test","str_data","replace","split","r_data","getUrlvalues","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","toast","msg","code","play","type","$router","go","methods","clickButton","_this3","canBack","back","push","newdata","k","order_req","paydata","store_id","destroyed","_this4","close","clearInterval","components","XHeader","__WEBPACK_IMPORTED_MODULE_1_vux_src_components_x_header_index_vue___default","a"],"mappings":"2DAAAA,EAAAC,SAAgBC,OAAA,WAAmB,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAC1E,OAAAG,EAAA,OACAE,OACAC,GAAA,YAEGH,EAAA,YACHI,YAAA,YACAF,OACAG,MAAA,KACAC,gBACAC,SAAA,QAGG,IACFC,0CCXD,IAAAC,EAAAC,EAAA,OAAAA,CAEAA,EAAA,QAEAA,EAAA,QAPA,SAAAC,GACAD,EAAA,SAUA,kBAEA,MAGAhB,EAAAC,QAAAc,EAAAd,0ICbAiB,EAAA,SACAC,KAAK,SACLC,KAFe,WAGf,OACAC,KAAK,KACLC,IAAI,GACJC,OAAOnB,KAAKoB,OAAOpB,KAAKqB,OAAOC,MAAMC,KAAK,IAC1CC,UAAU,KACVC,OAAM,EACNC,QAAQ,KAIRC,QAbe,WAaN,IAAAC,EAAA5B,KAEL6B,EAAQ7B,KACT8B,OAAOC,MACVC,IAAIC,UAAU,WACdL,EAAKF,QAAUK,KAAKG,MAAMC,aAAa,6BAIvC,IAAIC,EAASpC,KAAKqB,OAAOC,MACzB,IAAI,IAAIe,KAAOD,EAAOE,QACtBtC,KAAKmB,QAAWkB,EAAI,IAAID,EAAOE,QAAQD,GAAK,IAE5CrC,KAAKmB,OAASnB,KAAKmB,OAAOoB,UAAU,EAAEvC,KAAKmB,OAAOqB,OAAO,GACzDC,QAAQC,IAAI1C,KAAKmB,QAGjBnB,KAAKiB,KAAOc,KAAKY,QAAQC,OAAQ5C,KAAKmB,OAAQ,cAC9C0B,IAAI,OACJC,OAAO,QAEP9C,KAAKiB,KAAK8B,OACV/C,KAAKiB,KAAK+B,QAAU,WACpBpB,EAAKH,OAAQ,GAGb,IAAIwB,EAAO,KAEXR,QAAQC,IAAI,SAAS1C,KAAKmB,QAC1BnB,KAAKiB,KAAKiC,iBAAiB,kBAAmB,SAACC,GAC/C,GAAe,KAAZA,EAAEC,SAAe,CAEpB,GADAxB,EAAKV,IAAMmC,mBAAmBtB,KAAKY,QAAQW,eAAe,cAAcC,UACrEN,IAAOrB,EAAKV,IAAI,CACnB,IAAIsC,EAAY,IAAI5B,EAAKR,OAAO,oBAC5BqC,EAAM,IAAIC,OAAOF,EAAU,KAG/B,GAFAf,QAAQC,IAAI,SAASd,EAAKV,IAAIuC,GAC9BhB,QAAQC,IAAIe,EAAIE,KAAK/B,EAAKV,MACvBuC,EAAIE,KAAK/B,EAAKV,KACjB,IACA,IAAI0C,EAAWhC,EAAKV,IAAI2C,QAAQJ,EAAI,IAAIK,MAAM,KAC1CC,EAASnC,EAAKoC,aAAaJ,EAAS,IACxCnB,QAAQC,IAAI,OAAOuB,IAAeF,IAClC/B,IAAIkC,MAAMH,EAAOI,KACD,GAAbJ,EAAOK,MACVvC,EAAMH,SAAWG,EAAMH,QAAQ2C,OACf,QAAbjC,EAAOkC,KACVzC,EAAM0C,QAAQV,QAAQ,oBAEtBhC,EAAM0C,QAAQV,QAAQ,4BAItBhC,EAAM0C,QAAQC,IAAI,GAEhB,MAAO/C,GACTgB,QAAQC,IAAIuB,IAAexC,KAI3BwB,EAAOrB,EAAKV,OAET,IAEHuD,SAEAC,YAFQ,SAEIvB,GAAE,IAAAwB,EAAA3E,KACdA,KAAKiB,KAAK2D,QAAQ,SAACzB,IACfwB,EAAKlD,OAAS0B,EAAEyB,QACpBD,EAAK1D,KAAK4D,OAEVF,EAAKJ,QAAQO,KAAK,aAIlBd,aAXQ,SAWK9C,GAGb,IAFA,IAAI6C,EAAS7C,EAAI4C,MAAM,KACnBzB,EAAM,KAAK0C,KACPC,EAAE,EAAEA,EAAEjB,EAAOvB,OAAOwC,IAE5BD,GADA1C,EAAM0B,EAAOiB,GAAGlB,MAAM,MACV,IAAMzB,EAAI,GAEtB,OAAO0C,GAEPE,UApBQ,SAoBEC,EAAQC,MAIlBC,UApGe,WAoGJ,IAAAC,EAAArF,KACXA,KAAKiB,KAAKqE,QACVtF,KAAKiB,KAAKiC,iBAAiB,QAAQ,WACnCmC,EAAKpE,KAAO,OAETjB,KAAKwB,YACR+D,cAAcvF,KAAKwB,WACnBxB,KAAKwB,UAAY,OAGjBgE,YACAC,QAAAC,EAAAC","file":"static/js/75.cdce4b4130d9c0be811d.js","sourcesContent":["module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"payweb\"\n    }\n  }, [_c('x-header', {\n    staticClass: \"fixed-top\",\n    attrs: {\n      \"title\": \"支付\",\n      \"left-options\": {\n        backText: ''\n      }\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-01294f07\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/home/kbb/payweb.vue\n// module id = FHtm\n// module chunks = 75","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-01294f07\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./payweb.vue\")\n}\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./payweb.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-01294f07\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./payweb.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-01294f07\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/home/kbb/payweb.vue\n// module id = s34f\n// module chunks = 75","\nimport XHeader from 'vux/src/components/x-header/index.vue'\n\nexport default {\nname:\"payweb\",\ndata(){\nreturn {\nview:null,\nurl:\"\",\ntarget:this.imgUrl+this.$route.query.link+\"?\",\npay_timer:null,\nerror:false,\nmyaudio:'',\n\n}\n},\nmounted(){\nlet myaudio;\nlet _this = this;\nif(window.plus){\nmui.plusReady(()=>{\nthis.myaudio = plus.audio.createPlayer('/static/audio/pulse.mp3');\n})\n}\n\nlet _query = this.$route.query;\nfor(var key in _query.payload){\nthis.target += (key+'='+_query.payload[key]+'&')\n}\nthis.target = this.target.substring(0,this.target.length-1);\nconsole.log(this.target)\n\n\nthis.view = plus.webview.create( this.target, \"webviewPay\",{\ntop:\"67px\",\nbottom:'0px'\n});\nthis.view.show();\nthis.view.onerror = ()=>{\nthis.error = true\n}\n\nlet _url = null;\n\nconsole.log('目标网址为：'+this.target);\nthis.view.addEventListener('progressChanged', (e) => {\nif(e.progress==100 ){\nthis.url = decodeURIComponent(plus.webview.getWebviewById('webviewPay').getURL());\nif(_url!==this.url){\nlet check_url = \"^\"+this.imgUrl+'api/api/payReturn';\nlet reg = new RegExp(check_url,'i');\nconsole.log('当前网址为：'+this.url,reg);\nconsole.log(reg.test(this.url))\nif(reg.test(this.url)){\ntry {\nlet str_data = this.url.replace(reg,\"\").split('?');\nlet r_data = this.getUrlvalues(str_data[1]);\nconsole.log('数据是：'+JSON.stringify(r_data));\nmui.toast(r_data.msg);\nif(r_data.code==1){\n_this.myaudio && _this.myaudio.play();\nif(_query.type=='join'){\n_this.$router.replace('/kbb/joinPartner');\n}else{\n_this.$router.replace('/kbb/CreditCardReceipts');\n}\n\n}else{\n_this.$router.go(-1);\n}\n} catch (error) {\nconsole.log(JSON.stringify(error))\n}\n}\n}\n_url = this.url;\n}\n}, false);\n},\nmethods:{\n\nclickButton(e){\nthis.view.canBack((e)=>{\nif(!this.error && e.canBack) {\nthis.view.back();\n}else{\nthis.$router.push(\"/index\");\n}\n});\n},\ngetUrlvalues(url){\nlet r_data = url.split('&');\nlet key = null,newdata={};\nfor(let k=0;k<r_data.length;k++){\nkey = r_data[k].split('=');\nnewdata[key[0]] = key[1];\n}\nreturn newdata\n},\norder_req(paydata,store_id){\n\n}\n},\ndestroyed(){\nthis.view.close();\nthis.view.addEventListener('close',()=>{\nthis.view = null;\n});\nif(this.pay_timer){\nclearInterval(this.pay_timer);\nthis.pay_timer = null;\n}\n},\ncomponents: {\nXHeader\n}\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/kbb/payweb.vue"],"sourceRoot":""}