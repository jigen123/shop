webpackJsonp([51],{"8qox":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("mvHQ"),i=e.n(s),n=e("ABCa"),o=e.n(n),c=e("QTi7"),r=e.n(c),d=e("EmH9"),l=e.n(d),u=e("Bfwr"),_=e.n(u),p=e("G1d5"),k=e.n(p);a.default={name:"nocardPayment",data:function(){return{users:localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")):"",bankCard:[],payBlock:[{name:"支付通道",tit_limit:"最多20000每笔"}],checked:"1",block_id:this.$route.query.block_id,count:this.$route.query.count,idcard:"",status:"",loading:!1}},components:{XHeader:o.a,Box:r.a,CheckIcon:l.a,Loading:_.a,circleTitle:k.a},computed:{},created:function(){},mounted:function(){this.bankCard;var t=this,a=this.block_id;this.$axios.post("/api/api/getPayBlock","data="+i()({block_id:a,count:this.count})).then(function(a){1==a.code?(t.payBlock=a.result,t.$axios.post("/api/api/seeCredit").then(function(a){1==a.code?(t.bankCard=a.result,t.checked=a.result[0].credit_id):mui.toast(a.msg)})):mui.toast(a.msg)})},methods:{addCreditCard:function(){var t=this;if(1==this.users.is_validate)this.$router.push("/kbb/addCreditCard");else{var a=this.users,e=a.userId,s=a.session_id;this.$axios.post("/api/Usercenter/see_realname_apply","data="+i()({userId:e,session_id:s})).then(function(a){200==a.code?1==a.data.status?t.$router.push("/kbb/addCreditCard"):0==a.data.status?(mui.toast("您的实名信息正在审核中"),t.$router.push("/my/my-name")):(a.data.status,mui.toast("需要先进行实名认证"),t.$router.push("/my/my-name")):(mui.toast("需要先进行实名认证"),t.$router.push("/my/my-name"))})}},confirmPay:function(){var t=1*this.count;if(t!=t)return mui.toast("金额格式不对");if(t<100)return mui.toast("金额不少于105");if(this.bankCard.length<1)return mui.toast("无信用卡可支付");var a={userId:localStorage.getItem("Token"),creditId:this.checked,money:this.count,blockId:this.block_id};console.log(a),this.$router.push({name:"payWeb",query:{payload:a,link:"/api/api/payMoney"}})}}}},USYu:function(t,a,e){t.exports=e.p+"static/img/no_card_bg.bde8e88.png"},aNeg:function(t,a){},kJPe:function(t,a,e){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"nocardPayment"}},[s("x-header",{attrs:{"left-options":{backText:""},title:t.payBlock.name}}),t._v(" "),s("div",{staticClass:"fixed-con-lg content"},[s("div",{staticClass:"nocard-banner",style:{background:"#469dc8 url("+e("DqCN")+") center bottom no-repeat",backgroundSize:"292px 114px"}},[s("router-link",{staticClass:"left-icon",attrs:{to:"/kbb/joinPartner"}},[s("img",{attrs:{width:"257.5",src:e("USYu")}})]),t._v(" "),s("div",{staticClass:"fee-tips",domProps:{innerHTML:t._s(t.payBlock.fee_tips)}})],1),t._v(" "),s("box",{attrs:{gap:"0 15px"}},[s("circleTitle",{staticClass:"money-view",attrs:{title:t.payBlock.name}},[s("div",{staticClass:"view-title"},[t._v(t._s(t.payBlock.tit_limit))]),t._v(" "),s("div",[t._v("¥"),s("span",{staticClass:"view-count"},[t._v(t._s(t.count))])])]),t._v(" "),t._l(t.bankCard,function(a,e){return s("div",{key:e,staticClass:"bankCard",style:{background:"#fff",backgroundSize:"84.5px 91.5px"},on:{click:function(e){t.checked=a.credit_id}}},[s("div",{staticClass:"bank_info"},[s("div",{staticClass:"iconBg"},[s("i",{staticClass:"iconfont",class:a.icon,style:{color:a.color}})]),t._v(" "),s("div",{staticClass:"bankName"},[s("p",[t._v(t._s(a.bank_name))]),t._v(" "),s("p",{staticClass:"name"},[t._v(t._s(a.name))])]),t._v(" "),s("check-icon",{staticClass:"checkIcon fr",attrs:{value:t.checked==a.credit_id},nativeOn:{click:function(e){t.checked=a.credit_id}}})],1),t._v(" "),s("p",{staticClass:"sj"},[t._v(t._s(a.credit_code))])])}),t._v(" "),s("div",{staticClass:"add-bank",on:{click:t.addCreditCard}},[s("span",{staticClass:"iconfont icon-add-more"}),t._v(" 添加信用卡")]),t._v(" "),s("p",{staticClass:"address"},[t._v("结算卡:\n                "),null==t.payBlock.bank?s("span",[t._v("\n                    您还没有绑定结算卡，"),s("router-link",{staticClass:"bank-tips",attrs:{to:"/collectMoney/payway/nocardPayment/addBank"}},[t._v("立即前往绑定")])],1):t._e(),t._v(" "),null!=t.payBlock.bank?s("span",[t._v("\n                    "+t._s(t.payBlock.bank.bank_name)+" "+t._s(t.payBlock.bank.bank_code)+"\n                 ")]):t._e()]),t._v(" "),s("div",{staticClass:"comfirm_pay",on:{click:t.confirmPay}},[t._v("提交支付")])],2)],1),t._v(" "),s("loading",{attrs:{show:t.loading,text:"交易中..."}})],1)},staticRenderFns:[]}},mXlO:function(t,a,e){var s=e("VU/8")(e("8qox"),e("kJPe"),function(t){e("aNeg")},"data-v-0ef7026a",null);t.exports=s.exports}});
//# sourceMappingURL=51.a30a24eaedba60b755c6.js.map