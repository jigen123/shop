webpackJsonp([58],{"+AJm":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Gu7T"),o=i.n(a),l=i("mvHQ"),s=i.n(l),n=i("PJh5"),r=(i.n(n),i("Au9i")),c=(i.n(r),i("ABCa")),d=i.n(c);e.default={name:"article-list",data:function(){return{page:1,popupVisible:!1,reloadState:1,more_state:1,drgl:[]}},methods:{getArticleList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,i=arguments[1],a=arguments[2];this.$axios.post("/api/Article/get_article","data="+s()({article_type:"EASYARTICLE",page:t})).then(function(t){if(200==t.code){if(i&&i(),t.data.list.length<1&&(e.more_state=2,e.loading=!0),a)return e.drgl=t.data.list,e.reloadState=1,!1;e.drgl=[].concat(o()(e.drgl),o()(t.data.list))}else e.reloadState=2}).catch(function(t){e.reloadState=3})},article_target:function(t){console.log(t),this.$router.push({name:"articleDetails",query:{id:t}})},loadMore:function(){var t=this;this.page++,this.loading=!0,this.getArticleList(this.page,function(){t.loading=!1})},loadTop:function(){var t=this;this.page=1,this.getArticleList(this.page,function(){t.popupVisible=!0,t.$refs.loadmore.onTopLoaded(),t.more_state=1,t.loadMore(),setTimeout(function(){t.popupVisible=!1},2e3)},!0)}},created:function(){this.getArticleList()},components:{Loadmore:r.Loadmore,Popup:r.Popup,XHeader:d.a}}},"/ilt":function(t,e){},ElZl:function(t,e,i){var a=i("VU/8")(i("+AJm"),i("pi7C"),function(t){i("ityj"),i("/ilt")},"data-v-5630bcaa",null);t.exports=a.exports},ityj:function(t,e){},pi7C:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-fff",attrs:{id:"article-list"}},[i("x-header",{attrs:{"left-options":{backText:""}}},[t._v("文章列表")]),t._v(" "),i("div",{staticStyle:{height:"100%",overflow:"scroll"}},[i("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,distanceIndex:5,autoFill:!0,topPullText:"↓ 下拉刷新",topDropText:"↑ 释放更新",topLoadingText:"正在加载 ...",topDistance:80}},[i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"drgl-list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":50}},t._l(t.drgl,function(e,a){return i("li",{key:a},[i("div",{staticClass:"flex",on:{click:function(i){t.article_target(e.id)}}},[i("div",{staticClass:"drgl-content"},[i("h4",{staticClass:"c-333"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"flex drgl-content-item c-888"},[i("div",[t._v(t._s(e.views)+"阅读")]),t._v(" "),i("div",[t._v(t._s(t.moment(1e3*e.update_time).format("YYYY-MM-DD")))])])]),t._v(" "),i("div",{staticClass:"degl-img c-ter lazy-c bg-f5"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl+e.photo,expression:"imgUrl+item.photo"}],attrs:{alt:""}})])])])})),t._v(" "),i("p",{staticClass:"page-infinite-loading"},[1==t.more_state?i("span",[i("mt-spinner",{attrs:{type:"fading-circle"}}),t._v("\n\t\t      \t    加载中...\n                ")],1):t._e(),t._v(" "),2==t.more_state?i("span",[t._v("暂无更多数据")]):t._e()])])],1),t._v(" "),i("popup",{attrs:{modal:"true",position:"top"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[t._v(t._s(1==this.reloadState?"更新成功":2==this.reloadState?"更新失败":3==this.reloadState?"请求出错":""))])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=58.44b8dfa66da73d07e2bd.js.map